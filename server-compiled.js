(()=>{var e={582:e=>{"use strict";e.exports=require("cors")},142:e=>{"use strict";e.exports=require("dotenv")},860:e=>{"use strict";e.exports=require("express")},13:e=>{"use strict";e.exports=require("mongodb")}},o={};function s(n){var t=o[n];if(void 0!==t)return t.exports;var i=o[n]={exports:{}};return e[n](i,i.exports,s),i.exports}(()=>{const e=s(860),{MongoClient:o,ObjectId:n}=s(13),t=s(582),i=(s(142).config(),e());let r;i.use(e.json()),i.use(t());const c=new o(process.env.mongoDbStringConnection);(async()=>{c.connect().then((()=>{console.log("is connected")})),r=c.db("test")})(),i.set("view engine","ejs"),i.set("views","./views"),i.use(e.static("public")),i.post("/admin",(async(e,o)=>{await r.collection("users").findOne({username:e.body.username})||r.collection("users").insertOne({...e.body,_id:new n})})),i.get("/home",(async(e,o)=>{const s=await r.collection("mobiles").find().toArray();o.render("home",{allMobs:s})})),i.get("/admin",((e,o)=>{o.render("admin")})),i.get("/mobiles",(async(e,o)=>{const s=await r.collection("mobiles").find().toArray();o.json(s)})),i.post("/mobiles/create",(async(e,o)=>{console.log(e.body),r.collection("mobiles").insertOne({...e.body,_id:new n})})),i.post("/mobiles/edit",(async(e,o)=>{const s=e.body._id;r.collection("mobiles").replaceOne({_id:new n(s)},{name:e.body.name,price:e.body.price,qty:e.body.qty,_id:new n(s)})})),i.delete("/mobiles/delete:id",(async(e,o)=>{const s=e.params.id.split(":")[1];r.collection("mobiles").deleteOne({_id:new n(s)})})),i.listen(9e3)})()})();